





Описание решения:

Сайт с возможностью регистрации и входа в свой аккаунт.
Внутри аккаунта:
- Настройки, в настройках функция "привязать кошелек %валюты%"
- Статистика, где расположен обратный отсчет, суммарная стоимость всех участников, графики

Алгоритм подтверждения владения аккаунтом:
- Пользователь вводит публичный ключ
- Копирует предложенную сайтом произвольную строку (генерируется бекендом сайта)
- Своим кошельком подписывает данную произвольную строку (приватным ключем, связанным с введённым публичным)
- Подписанную строку вставляет в специальное поле
- Жмёт ОК, после чего публичный ключ и подписанная строка отправляются на сервер
- На сервере происходит расшифровка подписанной строки при помощи публичного ключа
- В случае успешной расшифровки (строка совпала с той что сервер сгенерировал для этого аккаунта) - кошелек верифицирован

После верификации появляется возможность "генерации аккаунтов для waves"

Алгоритм №1 генерации аккаунта waves:
- На фронтенде для пользователя генерируется приватный ключ, предлагается его себе сохнаить %куда-угодно%
- Из приватного ключа генерируется публичный ключ (он и будет "кошельком" на waves)
- Если пользователя устраивает публичный ключ, то именно публичный ключ отправляется на сервер
- Далее в базу данных пользователей его новосозданный кошелек waves добавляется к его информации

Алгоритм №2 прикрепления существующего аккаунта waves:
- Пользователь вводит свой публичный ключ от кошелька waves
- Публичный ключ отправляется на сервер
- Далее в базу данных пользователей его кошелек waves добавляется к его информации

У нас получается база вида:

Юзернейм(почта), публичный ключ аккаунта %bitcoin%, публичный ключ аккаунта %waves%, пустое поле

В день аирдропа регистрация закрывается, подключение кошельков - тоже.
Запускается скрипт который обходит пользователей и их кошельки, скриптом находит балансы каждого из кошельков %Bitcoin% и добавляет в пустое поле баланс на момент розыгрыша.

У нас получается база вида:

Юзернейм(почта), публичный ключ аккаунта %bitcoin%, публичный ключ аккаунта %waves%, баланс %bitcoin%

Алгоритм розыгрыша:

Обходим всю базу клиентов, суммируем их балансы
Получаем общую сумму балансов всех клиентов.
(балансы считаем на локальном блокчейне, вплоть до какого-то конечного К-го блока, тем самым избавляемся от атаки "пербрасывание биткоинов в момент розыгрыша для фальсификации баланса кошелька")
В последнюю графу каждого пользователя перезаписываем его баланс/сумму_балансов

Делаем SELECT field_3, field_4 FROM наша_база;

Получили базу аккаунтов Waves, а так-же часть призового пула, которая должна на этот аккаунт быть зачислена.






Верхняя граница, скажем, 10eth
Нижняя граница, скажем, эквивалент 50 баксов

Чтобы не выводили в фиат